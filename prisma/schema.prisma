// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// schema.prisma


model User {
  user_id       String            @id @default(uuid())
  username     String
  password     String
  email        String
  role         String // Use enum or predefined roles


  profile      UserProfile?
  bookings     Booking[]
  reviews      Review[]
  feedbacks    Feedback[]
  // Service      Service[]
  Notification Notification[]
  // Admin        Admin?         @relation(fields: [adminAdminid], references: [adminid])
  // adminAdminid Int?
}




// Define the UserProfile table
model UserProfile {
  profileid    Int    @id @default(autoincrement())
  user_id       String    @unique
  firstname    String
  lastname     String
  phone        String
  address      String
  preferences  String
  profileimage String

  user         User   @relation(fields: [user_id], references: [user_id])
}


// Define the Admin table
model Admin {
  admin_id                String         @id @default(uuid())
  username               String
  password               String
  email                  String
  role                   String


  contents               Content[]
  // bookings               Booking[]
  // SuperAdmin             SuperAdmin? @relation(fields: [superAdminSuperadminid], references: [superadminid])
  // superAdminSuperadminid Int?
}

// Define the Service table
model Service {
  service_id    String       @id @default(uuid())
  servicename  String
  category     String
  description  String
  price        Float
  availability String
  providerid   Int
  // provider     User      @relation(fields: [providerid], references: [userid])
  bookings     Booking[]
  Review       Review[]
  // Admin        Admin?    @relation(fields: [adminAdminid], references: [adminid])
  adminAdminid Int?
}

// Define the Booking table
model Booking {
  bookingid    Int      @id @default(autoincrement())
  user_id       String 
  service_id    String
  bookingdate  DateTime
  bookingtime  String
  status       String


  user         User     @relation(fields: [user_id], references: [user_id])
  service      Service  @relation(fields: [service_id], references: [service_id])
  // Admin        Admin?   @relation(fields: [adminAdminid], references: [adminid])
  // adminAdminid Int?
}

// Define the Review table
model Review {
  reviewid   Int      @id @default(autoincrement())
  user_id     String
  service_id  String
  rating     Int
  comment    String
  reviewdate DateTime


  user       User     @relation(fields: [user_id], references: [user_id])
  service    Service  @relation(fields: [service_id], references: [service_id])
}


// Define the Feedback table
model Feedback {
  feedbackid   Int      @id @default(autoincrement())
  user_id       String
  subject      String
  comment      String
  feedbackdate DateTime

  user         User     @relation(fields: [user_id], references: [user_id])
}


// Define the Notification table (optional)
model Notification {
  notificationid Int      @id @default(autoincrement())
  user_id         String
  message        String
  date           DateTime
  status         String
  user           User     @relation(fields: [user_id], references: [user_id])
}








// Define the Content table
model Content {
  contentid Int    @id @default(autoincrement())
  title     String
  body      String
  type      String
  admin_id  String

  author    Admin  @relation(fields: [admin_id], references: [admin_id])
}



// Define the SuperAdmin table
model SuperAdmin {
  superadminid Int     @id @default(autoincrement())
  username     String
  password     String
  email        String
  // superAdmins  Admin[]
}
